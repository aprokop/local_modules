#%Module

conflict gcc intel llvm

module load gdb

set _module_name  [module-info name]
set is_module_rm  [module-info mode remove]
set sys           [uname sysname]
set os            [uname release]

set GCC_CURPATH $env(HOME)/local/opt/gcc

setenv          GCC_PATH        $GCC_CURPATH

set-alias       gcc             "gcc -fdiagnostics-color=auto"

# PATH is complex because of our use of ccache and its symbolic linkage
if { [ module-info mode load ] } {
    remove-path     PATH            $env(HOME)/bin
    remove-path     PATH            $env(HOME)/local/bin
}
prepend-path    PATH            $GCC_CURPATH/bin
if { [ module-info mode load ] } {
    prepend-path    PATH            $env(HOME)/local/bin
    prepend-path    PATH            $env(HOME)/bin
}
prepend-path    MANPATH         $GCC_CURPATH/share/man
prepend-path    INFOPATH        $GCC_CURPATH/share/info
prepend-path    LD_LIBRARY_PATH $GCC_CURPATH/lib:$GCC_CURPATH/lib64

setenv          CC              gcc
setenv          OMPI_CC         gcc
setenv          OMPI_MPICC      gcc
setenv          CXX             g++
setenv          OMPI_CXX        g++
setenv          OMPI_MPICXX     g++
setenv          OMPI_CFLAGS     "-fdiagnostics-color"
setenv          OMPI_CXXFLAGS   "-fdiagnostics-color"
